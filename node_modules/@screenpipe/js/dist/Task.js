import n from'node-cron';var e=class{_name;_interval;_time=null;_handler=null;_cronTask=null;constructor(r){this._name=r,this._interval=0;}every(r){return this._interval=r,this}at(r){return this._time=r,this}do(r){return this._handler=r,this}async schedule(){if(!this._handler)throw new Error(`No handler defined for task: ${this._name}`);let r=this.toCronExpression();this._cronTask=n.schedule(r,this._handler,{name:this._name});}stop(){return this._cronTask?.stop()}toCronExpression(){if(typeof this._interval=="number")return `*/${Math.floor(this._interval/6e4)} * * * *`;let[r,t]=this._interval.split(" ");switch(t){case"second":case"seconds":return `*/${r} * * * * *`;case"minute":case"minutes":return `*/${r} * * * *`;case"hour":case"hours":return `0 */${r} * * *`;case"day":case"days":return `0 0 */${r} * *`;default:throw new Error(`Unsupported interval unit: ${t}`)}}};export{e as Task};//# sourceMappingURL=Task.js.map
//# sourceMappingURL=Task.js.map